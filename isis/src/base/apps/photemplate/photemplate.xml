<?xml version="1.0" encoding="UTF-8"?>

<application name="photemplate" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://isis.astrogeology.usgs.gov/Schemas/Application/application.xsd">

  <brief> 
    Create a PVL template with photometric algorithms and parameters to be used 
    for photometric correction
  </brief>

  <description>
    <pre>
     This program creates a PVL template to be used in photomet for photometric 
     correction. There are three types of correction that can be applied in
     photomet:
  
      1) Photometric
      2) Atmospheric
      3) Normalization
      
     Photometric correction applies to the surface of an image. Atmospheric 
     correction applies to the atmosphere through which an image was acquired. 
     Normalization is the method in which the photometric and atmospheric 
     corrections are applied. 
      
     The photomet program requires at least that the user specify a photometric 
     option and a normalization option. The atmospheric correction is only valid 
     if one of the following normalization models is being used: AlbedoAtm,
     ShadeAtm, TopoAtm. 

     Example output files: 
      Example 1:

      Object = PhotometricModel 
       Group = Algorithm
          Name = Lambert
        EndGroup
      EndObject
      Object = NormalizationModel
        Group = Algorithm
          Name = Shade
        EndGroup
      EndObject
      
      Example 2:
      
      Object = PhotometricModel
        Group = Algorithm
          Name = Minnaert
          K = .5
        EndGroup
      EndObject
      Object = NormalizationModel
        Group = Algorithm
          Name = Albedo
          Incref = 0.0
          Incmat = 0.0
          Albedo = 1.0
          Thresh = 30.0
        EndGroup
      EndObject
      
      Example 3:
      
      Object = PhotometricModel
        Group  = Algorithm
          Name = Moonpr
        EndGroup
      EndObject
      Object = NormalizationModel
        Group = Algorithm
          Name = MoonAlbedo
          D = 0.0
          E = -0.222
          F = 0.5
          G2 = 0.39
          H = 0.062
          Bsh1 = 2.31
        EndGroup
      EndObject
      
      Example 4:
      
      Object = PhotometricModel
        Group  = Algorithm
          Name = HapkeHen
          Wh = 0.52
          Hh = 0.0
          B0 = 0.0
          Theta = 30.0
          Hg1 = .213
          Hg2 = 1.0
        EndGroup
      EndObject
      Object = AtmosphericModel
        Group = Algorithm
          Name = HapkeAtm2
          Hnorm = .003
          Tau = 0.28
          Tauref = 0.0
          Wha = .95
          Hga = 0.68
        EndGroup
      EndObject
      Object = NormalizationModel
        Group = Algorithm
          Name = AlbedoAtm
          Incref = 0.0
        EndGroup
      EndObject

    </pre>
  </description>

  <history>
    <change name="Noah Hilt" date="2008-11-18">
      Original version
    </change>
    <change name="Janet Barrett" date="2011-09-23">
      The entire user interface has been redesigned. The previous version of this 
      program made use of radio button lists to allow the user to choose a photometric
      model or an atmospheric model. In order to make the program more compact, the
      radio button lists were replaced with drop down menus. When an option is chosen
      from the drop down menu, the parameters that apply to that option are made visible.
      Parameters that don't apply to that option remain hidden. This helps to make the
      interface look less cluttered than it did when every parameter and every option
      were visible all the time. 
      The "NORMALIZATION" option is no longer available in this program. This program's
      main use is to create files with preset photometric and atmospheric values for use
      with various planets. The normalization models are not specific to individual 
      planets like the atmospheric and photometric models are. The normalization mode
      is only used in the photomet program, so this information now needs to be 
      provided through photomet.
    </change>
  </history>

  <seeAlso>
    <applications>
      <item>photomet</item>
    </applications>
  </seeAlso>

  <category>
    <categoryItem>Radiometric and Photometric Correction</categoryItem>
  </category>

  <groups>
    <group name="Files">
      <parameter name="FROMPVL">
         <type>filename</type>
         <fileMode>input</fileMode>
         <brief>
           Input PVL containing the photometric algorithms to use
         </brief>
         <defaultPath>$base/templates/photometry</defaultPath>
         <internalDefault>None</internalDefault>
         <description>
           Use this parameter to select an input filename. The information in
           this file will be merged with the information that is input through
           the user interface to create the output PVL file.
         </description>
         <helpers>
          <helper name="H1">
            <function>PrintPvl</function>
            <brief>View Input PVL File</brief>
            <description>
              This helper button will cat out the information in the given input PVL file to the session log
               of the application
             </description>
            <icon>$ISIS3DATA/base/icons/labels.png</icon>
          </helper>
          <helper name="H2">
            <function>LoadPvl</function>
            <brief>Load Input PVL File values into the GUI</brief>
            <description>
              This helper button will take the values in the FROMPVL file and
              load them into their correct locations in the GUI
             </description>
             <icon>$ISIS3DATA/base/icons/exec.png</icon>
          </helper>
         </helpers>
         <filter>
           *.pvl
         </filter>
       </parameter>
      <parameter name="TOPVL">
         <type>filename</type>
         <fileMode>output</fileMode>
         <brief>
           Output PVL containing the photometric algorithms to use
         </brief>
         <description>
           Use this parameter to select the output filename. If the file already
           exists it will be overwritten. The '.pvl' extension will 
           automatically be appended to the entered filename if you do not type  
           in an extension.
         </description>
         <filter>
           *.pvl
         </filter>
       </parameter>
    </group>
    
    <group name="Photometric Parameters">
      <parameter name="PHTNAME">
        <type>combo</type>
        <brief>
          Photometric model to be used
        </brief>
        <description>
          This is the name of the surface photometric function model
        </description>
        <internalDefault>NONE</internalDefault>
        <default>
          <item>NONE</item>
        </default>
        <list>
          <option value="NONE">
            <brief>No Photometric Model</brief>
            <description>
            </description>
            <exclusions>
              <item>THETA</item>
              <item>WH</item>
              <item>HG1</item>
              <item>HG2</item>
              <item>HH</item>
              <item>B0</item>
              <item>BH</item>
              <item>CH</item>
              <item>L</item>
              <item>K</item>
              <item>PHASELIST</item>
              <item>KLIST</item>
              <item>LLIST</item>
              <item>PHASECURVELIST</item>
            </exclusions>
          </option>

          <option value="LAMBERT">
            <brief>
              Lambert Photometric Model
            </brief>
            <description>
              Simple photometric model which predicts that light 
              incident on a surface is scattered uniformly in all directions;
		          the total amount of reflected light depends on the incidence angle
		          of the illumination. This function does not depend upon the
		          outgoing light direction.
            </description>
            <exclusions>
              <item>THETA</item>
              <item>WH</item>
              <item>HG1</item>
              <item>HG2</item>
              <item>HH</item>
              <item>B0</item>
              <item>BH</item>
              <item>CH</item>
              <item>L</item>
              <item>K</item>
              <item>PHASELIST</item>
              <item>KLIST</item>
              <item>LLIST</item>
              <item>PHASECURVELIST</item>
            </exclusions>
          </option>
          <option value="HAPKEHEN">
            <brief>
              Hapke-Henyey-Greenstein Photometric Model
            </brief>
            <description>
              Hapke-Henyey-Greenstein photometric model. Derive model albedo
              using complete Hapke model with Henyey-Greenstein single-particle
		          phase function whose coefficients are Hg1 and Hg2, plus single
		          scattering albedo Wh, opposition surge parameters Hh and B0, and
		          macroscopic roughness Theta.
            </description>
            <inclusions>
              <item>THETA</item>
              <item>WH</item>
              <item>HG1</item>
              <item>HG2</item>
              <item>HH</item>
              <item>B0</item>
            </inclusions>
            <exclusions>
              <item>BH</item>
              <item>CH</item>
              <item>L</item>
              <item>K</item>
              <item>PHASELIST</item>
              <item>KLIST</item>
              <item>LLIST</item>
              <item>PHASECURVELIST</item>
            </exclusions>
          </option>
          <option value="HAPKELEG">
            <brief>
              Hapke-Legendre Photometric Model
            </brief>
            <description>
              Hapke-Legendre photometric model. Derive model albedo
              using complete Hapke model with Legendre single-particle
		          phase function whose coefficients are Bh and Ch, plus single
		          scattering albedo Wh, opposition surge parameters Hh and B0, and
		          macroscopic roughness Theta.
            </description>
            <inclusions>
              <item>THETA</item>
              <item>WH</item>
              <item>BH</item>
              <item>CH</item>
              <item>HH</item>
              <item>B0</item>
            </inclusions>
            <exclusions>
              <item>HG1</item>
              <item>HG2</item>
              <item>L</item>
              <item>K</item>
              <item>PHASELIST</item>
              <item>KLIST</item>
              <item>LLIST</item>
              <item>PHASECURVELIST</item>
            </exclusions>
          </option>
          <option value="LOMMELSEELIGER">
            <brief>
              Lommel-Seeliger Photometric Model
            </brief>
            <description>
              This model takes into account the radiance that results from
              single scattering (scattering of collimated incident light) and
		          does not take into account the radiance that results from multiple
		          scattering (scattering of diffuse light which has made its way
		          indirectly to the same position by being scattered one or more
		          times). This model depends on the incidence and emission angles.
            </description>
            <exclusions>
              <item>THETA</item>
              <item>WH</item>
              <item>HG1</item>
              <item>HG2</item>
              <item>BH</item>
              <item>CH</item>
              <item>HH</item>
              <item>B0</item>
              <item>L</item>
              <item>K</item>
              <item>PHASELIST</item>
              <item>KLIST</item>
              <item>LLIST</item>
              <item>PHASECURVELIST</item>
            </exclusions>
          </option>
          <option value="LUNARLAMBERTEMPIRICAL">
            <brief>
              Lunar Lambert Empirical Photometric Model
            </brief>
            <description>
              This model combines a weighted sum of the LommelSeeliger and
              Lambert models. Given a suitable value for the LunarLambert
		          function weight, L, this model fits the true reflectance behavior
		          of many planetary surfaces equally well as the Hapke model. This
		          model also depends on the incidence and emission angles.
            </description>
            <inclusions>
              <item>PHASELIST</item>
              <item>LLIST</item>
              <item>PHASECURVELIST</item>
            </inclusions>
            <exclusions>
              <item>THETA</item>
              <item>WH</item>
              <item>HG1</item>
              <item>HG2</item>
              <item>BH</item>
              <item>CH</item>
              <item>HH</item>
              <item>B0</item>
              <item>K</item>
              <item>L</item>
              <item>KLIST</item>
            </exclusions>
          </option>
          <option value="LUNARLAMBERTMCEWEN">
            <brief>
              Lunar Lambert-McEwen Photometric Model
            </brief>
            <description>
              This model was developed specifically for use with the Moon. This
              model was designed to be used in conjunction with the MoonAlbedo
		          normalization model.
            </description>
            <exclusions>
              <item>THETA</item>
              <item>WH</item>
              <item>HG1</item>
              <item>HG2</item>
              <item>BH</item>
              <item>CH</item>
              <item>HH</item>
              <item>B0</item>
              <item>L</item>
              <item>K</item>
              <item>PHASELIST</item>
              <item>KLIST</item>
              <item>LLIST</item>
              <item>PHASECURVELIST</item>
            </exclusions>
          </option>
          <option value="LUNARLAMBERT">
            <brief>
              Lunar Lambert Photometric Model
            </brief>
            <description>
              This model combines a weighted sum of the LommelSeeliger and
              Lambert models. Given a suitable value for the LunarLambert
		          function weight, L, this model fits the true reflectance behavior
		          of many planetary surfaces equally well as the Hapke model. This
		          model also depends on the incidence and emission angles.
            </description>
            <inclusions>
              <item>L</item>
            </inclusions>
            <exclusions>
              <item>THETA</item>
              <item>WH</item>
              <item>HG1</item>
              <item>HG2</item>
              <item>BH</item>
              <item>CH</item>
              <item>HH</item>
              <item>B0</item>
              <item>K</item>
              <item>PHASELIST</item>
              <item>KLIST</item>
              <item>LLIST</item>
              <item>PHASECURVELIST</item>
            </exclusions>
          </option>
          <option value="MINNAERTEMPIRICAL">
            <brief>
              Minnaert Empirical Photometric Model
            </brief>
            <description>
              This model combines a weighted sum of the LommelSeeliger and
              Lambert models. Given a suitable value for the LunarLambert
		          function weight, L, this model fits the true reflectance behavior
		          of many planetary surfaces equally well as the Hapke model. This
		          model also depends on the incidence and emission angles.
            </description>
            <inclusions>
              <item>PHASELIST</item>
              <item>KLIST</item>
              <item>PHASECURVELIST</item>
            </inclusions>
            <exclusions>
              <item>THETA</item>
              <item>WH</item>
              <item>HG1</item>
              <item>HG2</item>
              <item>BH</item>
              <item>CH</item>
              <item>HH</item>
              <item>B0</item>
              <item>K</item>
              <item>L</item>
              <item>LLIST</item>
            </exclusions>
          </option>
          <option value="MINNAERT">
            <brief>
              Minnaert Photometric Model
            </brief>
            <description>
              This model combines a weighted sum of the LommelSeeliger and
              Lambert models. Given a suitable value for the LunarLambert
		          function weight, L, this model fits the true reflectance behavior
		          of many planetary surfaces equally well as the Hapke model. This
		          model also depends on the incidence and emission angles.
            </description>
            <inclusions>
              <item>K</item>
            </inclusions>
            <exclusions>
              <item>THETA</item>
              <item>WH</item>
              <item>HG1</item>
              <item>HG2</item>
              <item>BH</item>
              <item>CH</item>
              <item>HH</item>
              <item>B0</item>
              <item>L</item>
              <item>PHASELIST</item>
              <item>KLIST</item>
              <item>LLIST</item>
              <item>PHASECURVELIST</item>
            </exclusions>
          </option>
        </list>
      </parameter>
    
      <parameter name="THETA">
        <type>double</type>
        <brief>
          Macroscopic Roughness Angle
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The Hapke macroscopic roughness component.
        </description>
        <minimum inclusive="yes">0.0</minimum>
        <maximum inclusive="yes">90.0</maximum>
      </parameter>

      <parameter name="WH">
        <type>double</type>
        <brief>
          Single Scattering Albedo
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The Hapke single scattering albedo component.
        </description>
        <minimum inclusive="no">0.0</minimum>
        <maximum inclusive="yes">1.0</maximum>
      </parameter>

      <parameter name="HG1">
        <type>double</type>
        <brief>
          Hapke Henyey Greenstein Coefficient
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The Hapke Henyey Greenstein coefficient for single particle phase 
          function.
        </description>
        <minimum inclusive="no">-1.0</minimum>
        <maximum inclusive="no">1.0</maximum>
      </parameter>

      <parameter name="HG2">
        <type>double</type>
        <brief>
          Hapke Henyey Greenstein Coefficient
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The Hapke Henyey Greenstein coefficient for single particle phase 
          function.
        </description>
        <minimum inclusive="yes">0.0</minimum>
        <maximum inclusive="yes">1.0</maximum>
      </parameter>

      <parameter name="BH">
        <type>double</type>
        <brief>
          Hapke Legendre Coefficient
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The Hapke Legendre coefficient for single particle phase 
          function.
        </description>
        <minimum inclusive="no">-1.0</minimum>
        <maximum inclusive="no">1.0</maximum>
      </parameter>

      <parameter name="CH">
        <type>double</type>
        <brief>
          Hapke Legendre Coefficient
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The Hapke Legendre coefficient for single particle phase 
          function.
        </description>
        <minimum inclusive="no">-1.0</minimum>
        <maximum inclusive="no">1.0</maximum>
      </parameter>

      <parameter name="HH">
        <type>double</type>
        <brief>
          Hapke Opposition Surge 
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The Hapke opposition surge component.
        </description>
        <minimum inclusive="yes">0.0</minimum>
      </parameter>

      <parameter name="B0">
        <type>double</type>
        <brief>
          Hapke Opposition Surge
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The Hapke opposition surge component.
        </description>
        <minimum inclusive="yes">0.0</minimum>
      </parameter>

      <parameter name="L">
        <type>double</type>
        <brief>
          Lunar-Lambert Function Weight
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The Lunar-Lambert function weight.
        </description>
      </parameter>

      <parameter name="K">
        <type>double</type>
        <brief>
          Minnaert Function Exponent
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The Minnaert function exponent.
        </description>
        <minimum inclusive="yes">0.0</minimum>
      </parameter>

      <parameter name="PHASELIST">
        <type>string</type>
        <brief>
          Minnaert Empirical Function Phase Angle List
        </brief>
        <description>
          The Minnaert empirical function phase angle list.
        </description>
        <internalDefault>
          No List
        </internalDefault>
      </parameter>

      <parameter name="KLIST">
        <type>string</type>
        <brief>
          Minnaert Empirical Function Limb Darkening Parameter List
        </brief>
        <description>
          The Minnaert empirical function exponent list.
        </description>
        <internalDefault>
          No List
        </internalDefault>
      </parameter>

      <parameter name="LLIST">
        <type>string</type>
        <brief>
          Lunar Lambert Empirical Function Limb Darkening Parameter List
        </brief>
        <description>
          The Lunar Lambert empirical function exponent list.
        </description>
        <internalDefault>
          No List
        </internalDefault>
      </parameter>

      <parameter name="PHASECURVELIST">
        <type>string</type>
        <brief>
          Minnaert Empirical Function Phase Curve Value List
        </brief>
        <description>
          The Minnaert empirical function phase curve value list.
        </description>
        <internalDefault>
          No List
        </internalDefault>
      </parameter>
    </group>

    <group name="Atmospheric Parameters">
      <parameter name="ATMNAME">
        <type>combo</type>
        <brief>
          Atmospheric model to be used
        </brief>
        <description>
          This is the name of the atmospheric photometric function model. This 
          can only be used with the three atmospheric normalization models: 
          AlbedoAtm, ShadeAtm, and TopoAtm.
        </description>
        <internalDefault>NONE</internalDefault>
        <default>
          <item>NONE</item>
        </default>
        <list>
          <option value="NONE">
            <brief>No Atmospheric Model</brief>
            <description>
            </description>
            <exclusions>
              <item>HNORM</item>
              <item>BHA</item>
              <item>TAU</item>
              <item>TAUREF</item>
              <item>WHA</item>
              <item>HGA</item>
            </exclusions>
          </option>

          <option value="ANISOTROPIC1">
            <brief>
              Anisotropic 1 Atmospheric Model
            </brief>
            <description>
              Uses Chandrasekhar's solution for anisotropic scattering described
              by a one term Legendre polynomial. This model uses first order
              scattering approximation.
            </description>
            <inclusions>
              <item>HNORM</item>
              <item>BHA</item>
              <item>TAU</item>
              <item>TAUREF</item>
              <item>WHA</item>
            </inclusions>
            <exclusions>
              <item>HGA</item>
            </exclusions>
          </option>
          <option value="ANISOTROPIC2">
            <brief>
              Anisotropic 2 Atmospheric Model
            </brief>
            <description>
              Uses Chandrasekhar's solution for anisotropic scattering described
              by a one term Legendre polynomial. This model uses second order 
              scattering approximation. It is slower but more accurate than 
              Anisotropic1.
            </description>
            <inclusions>
              <item>HNORM</item>
              <item>BHA</item>
              <item>TAU</item>
              <item>TAUREF</item>
              <item>WHA</item>
            </inclusions>
            <exclusions>
              <item>HGA</item>
            </exclusions>
          </option>
          <option value="HAPKEATM1">
            <brief>
              Hapke 1 Atmospheric Model
            </brief>
            <description>
              Provides an approximation for strongly anisotropic scattering that
              is similar to Hapke's model for a planetary surface. The 
              Chandrasekhar solution for isotropic scattering is used for the 
              multiple scattering terms, and a correction is made to the singly 
              scattered light for anisotropic particle phase function. A one 
              term Henyey Greenstein function is used. This model uses a first 
              order scattering approximation.
            </description>
            <inclusions>
              <item>HNORM</item>
              <item>HGA</item>
              <item>TAU</item>
              <item>TAUREF</item>
              <item>WHA</item>
            </inclusions>
            <exclusions>
              <item>BHA</item>
            </exclusions>
          </option>
          <option value="HAPKEATM2">
            <brief>
              Hapke 2 Atmospheric Model
            </brief>
            <description>
              Provides an approximation for strongly anisotropic scattering that
              is similar to Hapke's model for a planetary surface. The 
              Chandrasekhar solution for isotropic scattering is used for the 
              multiple scattering terms, and a correction is made to the singly 
              scattered light for anisotropic particle phase function. A one 
              term Henyey Greenstein function is used. This model uses a second 
              order scattering approximation. It is slower but more accurate 
              than HapkeAtm1.
            </description>
            <inclusions>
              <item>HNORM</item>
              <item>HGA</item>
              <item>TAU</item>
              <item>TAUREF</item>
              <item>WHA</item>
            </inclusions>
            <exclusions>
              <item>BHA</item>
            </exclusions>
          </option>
          <option value="ISOTROPIC1">
            <brief>
              Isotropic 1 Atmospheric Model
            </brief>
            <description>
              Uses Chandrasekhar's solution for isotropic scattering. This model
              uses first order scattering approximation.
            </description>
            <inclusions>
              <item>HNORM</item>
              <item>TAU</item>
              <item>TAUREF</item>
              <item>WHA</item>
            </inclusions>
            <exclusions>
              <item>HGA</item>
              <item>BHA</item>
            </exclusions>
          </option>
          <option value="ISOTROPIC2">
            <brief>
              Isotropic 2 Atmospheric Model
            </brief>
            <description>
              Uses Chandrasekhar's solution for isotropic scattering. This model
              uses second order scattering approximation. It is slower but more 
              accurate than Isotropic1.
            </description>
            <inclusions>
              <item>HNORM</item>
              <item>TAU</item>
              <item>TAUREF</item>
              <item>WHA</item>
            </inclusions>
            <exclusions>
              <item>HGA</item>
              <item>BHA</item>
            </exclusions>
          </option>
        </list>
      </parameter>
    
      <parameter name="TAU">
        <type>double</type>
        <brief>
          Optical Depth of Atmosphere
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The normal optical depth of the atmosphere.
        </description>
        <minimum inclusive="yes">0.0</minimum>
      </parameter>

      <parameter name="TAUREF">
        <type>double</type>
        <brief>
          Reference Value of Tau
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The reference value of Tau to which the image will be normalized.
        </description>
        <minimum inclusive="yes">0.0</minimum>
      </parameter>

      <parameter name="HGA">
        <type>double</type>
        <brief>
          Henyey Greenstein Coefficient
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The coefficient of single particle Henyey Greenstein phase 
          function.
        </description>
        <minimum inclusive="no">-1.0</minimum>
        <maximum inclusive="no">1.0</maximum>
      </parameter>

      <parameter name="WHA">
        <type>double</type>
        <brief>
          Single Scattering Albedo
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The single scattering albedo of atmospheric particles.
        </description>
        <minimum inclusive="no">0.0</minimum>
        <maximum inclusive="yes">1.0</maximum>
      </parameter>
      
      <parameter name="BHA">
        <type>double</type>
        <brief>
          Legendre Coefficient
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The coefficient of the single particle Legendre phase function.
        </description>
        <minimum inclusive="yes">-1.0</minimum>
        <maximum inclusive="yes">1.0</maximum>
      </parameter>

      <parameter name="HNORM">
        <type>double</type>
        <brief>
          Atmospheric Shell Thickness
        </brief>
        <internalDefault>None</internalDefault>
        <description>
          The atmospheric shell thickness normalized to the planet 
          radius.
        </description>
        <minimum inclusive="yes">0.0</minimum>
      </parameter>
    </group>
  </groups>
</application>

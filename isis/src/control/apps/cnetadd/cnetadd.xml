<?xml version="1.0" encoding="UTF-8"?>

<application name="cnetadd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://isis.astrogeology.usgs.gov/Schemas/Application/application.xsd">

  <brief>
    Adds images to an Isis3 control network file.
  </brief>

  <description>
    <p>
      This program takes an input list of cubes and sees if they can be added to 
      an existing Isis3 control network file.
    </p>
  </description>

  <category>
    <categoryItem>Control Networks</categoryItem>
  </category>

  <history>
    <change name="Steven Koechle" date="2008-11-24">
      Original version
    </change>
    <change name="Christopher Austin" date="2008-01-29">
      Fixed major memory leak and added memory control.  Changed param NETWORK
      to CNET, increased developer documentation, added a Progress Object
      during lat/lon calculation.
    </change>
    <change name="Christopher Austin" date="2008-02-23">
      Fixed an error with not catching the failed ground range setting.
    </change>
    <change name="Travis Addair" date="2009-08-27">
      Added radio button allowing user to fill a skeleton control network (no 
      control measures) generated by the seedgrid application so long as it 
      contains a latitude/longitude for each control point. This list of files 
      to add has also had its parameter name changed from FROMLIST2 to ADDLIST 
      for clarity.
    </change>
    <change name="Travis Addair" date="2009-09-02">
      When adding measures to a network generated by the seedgrid application, 
      the Ignore keyword for a control point is now set to false if the point 
      has at least two measures.
    </change>
    <change name="Travis Addair" date="2009-09-04">
      A sorted list of control points that were modified will now be put into 
      the log file.
    </change>
    <change name="Christopher Austin" date="2010-04-07">
      Modified to handle duplicate Serial Numbers between the FROMLIST and
      ADDLIST instead of throwing an exception.
    </change>
    <change name="Christopher Austin" date="2010-06-11">
      Added modified point only cnet output, added list of modified points
      output.
    </change>
    <change name="Christopher Austin" date="2010-06-25">
      Added an error message  when RETREIVAL=POINT is used but lat/lon values
      are absent from the points.
    </change>
    <change name="Sharmila Prasad" date="2010-10-13">
      Modified for binary cnet
    </change>
    <change name="Sharmila Prasad" date="2010-10-22">
      Reset Apriori values if Apriori source is AvgOfMeasures
    </change>
    <change name="Sharmila Prasad" date="2010-10-28">
      Do not add measures if the Control Point is locked and Apriori source is 
      "AverageOfMeasures".
    </change>
    <change name="Christopher Austin" date="2010-11-19">
      Added the DEFFILE option and test, similar to cnetref. Logging still needs
      to be done.
    </change>
    <change name="Christopher Austin" date="2010-12-22">
      Modified documentation to better clarify the DEFFILE parameter.
    </change>
    <change name="Christopher Austin" date="2011-01-18">
      Altered to compile with the new Control redesign.
    </change>
    <change name="Christopher Austin" date="2011-02-18">
      Added the TOLIST parameter.
    </change>
  </history>

  <groups>

    <group name="Input Files">

        <parameter name="FROMLIST">
          <type>filename</type>
          <fileMode>input</fileMode>
          <brief>
            List of ISIS3 input cubes in the control net.
          </brief>
          <description>
          A text file containing one column of ISIS3 cube file names. Every file
          used in the control net file should be represented in this list. The 
          cubes must be available for the program to open.
          </description>
          <filter>
            *.lis
          </filter>
        </parameter>

        <parameter name="INNET">
          <type>filename</type>
          <fileMode>input</fileMode>
          <brief>
              Isis3 existing control network file
          </brief>
          <description>
            Use this parameter to specify the control network file containing
            the information.
            </description>
          <filter>
            *.net
          </filter>
        </parameter>
   
      <parameter name="ADDLIST">
        <type>filename</type>                
        <fileMode>input</fileMode>
        <brief>
          List of ISIS3 input cubes to add to the control net.
        </brief>
        <description>
          A text file containing one column of ISIS3 cube file names. The cubes
          must be available for the program to open. If cubes in this list are
          also in the FROMLIST, process time will be increased.
        </description>
        <filter>
          *.lis
        </filter>
      </parameter>

    </group>

    <group name="Output Files">

      <parameter name="OUTNET">
          <type>filename</type>
          <fileMode>output</fileMode>
          <brief>
              Isis3 output control network file
          </brief>
          <description>
            Use this parameter to specify the control network file to output
            the information to.
            </description>
          <filter>
            *.net
          </filter>
      </parameter>

      <parameter name="TOLIST">
        <type>filename</type>                
        <fileMode>input</fileMode>
        <brief>
          List of ISIS3 output cubes in the OUTNET
        </brief>
        <description>
          Use this parameter to receive a cubelist of all cubes in the OUTNET
          that are also in the FROMLIST or ADDLIST.
        </description>
        <filter>
          *.lis
        </filter>
        <internalDefault>NONE</internalDefault>
      </parameter>
      
      <parameter name="LOG">
          <type>filename</type>
          <fileMode>output</fileMode>
          <brief>
              Optional Log File
          </brief>
          <description>
            This optional log file contains information about which files were 
            added to the control net, which ones were not, and which Serial
            Numbers were in both the FROMLIST and ADDLIST.
          </description>
          <internalDefault>NONE</internalDefault>
        </parameter>

    </group>

    <group name="RetrievalOptions">                           

        <parameter name="RETRIEVAL">
            <type>string</type>
            <brief>
               Retrieve latitude and longitude from control points in the 
               control network or the reference cameras obtained from the
               FROMLIST
            </brief>
            <description>
                This option allows the user to specify whether the latitude and 
                longitude used for calculating control measures' sample/line 
                information should be retrieved from the reference cameras 
                generated with the FROMLIST or the control points contained 
                within the input control network itself.  If the POINT option is 
                selected, then there is no need to specify a FROMLIST, otherwise
                one must be specified. 
            </description>
            <default><item>REFERENCE</item></default>
            <list>
                <option value="REFERENCE">
                    <brief>
                       Retrieve latitudes and longitudes from reference cameras
                    </brief>
                    <description>
                        This option will retrieve the latitude and longitude 
                        used for computing sample/line position in each control 
                        measure from a reference camera obtained from the 
                        FROMLIST.
                    </description>
                    <inclusions>
                        <item>FROMLIST</item>
                    </inclusions>
                </option>
                <option value="POINT">
                    <brief>
                        Retrieve latitudes and longitudes from control points
                    </brief>
                    <description>
                        This option will retrieve the latitude and longitude 
                        used for computing sample/line position in each control 
                        measure from its control point in the input control 
                        network.
                    </description>
                    <exclusions>
                        <item>FROMLIST</item>
                    </exclusions>
                </option>
            </list>
        </parameter>

        <parameter name="EXTRACT">
          <type>string</type>
          <default><item>ALL</item></default>
          <brief>Defines what Control Points are to be placed in OUTNET</brief>
          <description>
            Use this parameter to determine whether to place all Control Points
            in the OUTNET, or just the Control Points with new Control Measures
            and reference image measures in the OUTNET. In this case, only
            reference measures and new measures are placed in the Control
            Points of the OUTNET.
          </description>
          <list>
             <option value="ALL">
                <brief>Place all Control Points in the OUTNET</brief>
                <description>
                  This option will add the new cubes to the INNET and place
                  the result in OUTNET.
                </description>
              </option>
             <option value="MODIFIED">
                <brief>Only place changed Control Points in OUTNET</brief>
                <description>
                  This option will add the new cubes to the INNET, but only
                  place Control Points that have been added to in the OUTNET.
                  In addition, only new and reference Control Measures will be
                  placed in the resultant Control Points of the OUTNET.
                 </description>
              </option>
          </list>
        </parameter>

        <parameter name="DEFFILE">
          <type>filename</type>
          <fileMode>input</fileMode>
          <internalDefault>None</internalDefault>
          <brief>
            PVL file containing the description of the Validity Control
            Measure Keywords for new/added measures
          </brief>
          <description>
            PVL file containing the description of the Validity Control
            Measure Keywords. <strong>Newly added Control Measures</strong>
            which are not valid based on these keywords will be set to Ignored.
            Control Measures that are originally in the INNET will
            <strong>not</strong> be evaluated/Ignored by the DEFFILE.
          </description>
          <filter>
            *.def *.pvl
          </filter>
        </parameter>
        
        <parameter name="MODIFIEDPOINTS">
          <type>filename</type>
          <fileMode>input</fileMode>
          <internalDefault>Do not list</internalDefault>
          <brief>Creates a list of all modified Control Points</brief>
          <description>
            Create a list of the control points that were modified by the
            addition of measures.
          </description>
          <filter> *.lis *.txt </filter>
        </parameter>

    </group>
</groups>        

</application>
